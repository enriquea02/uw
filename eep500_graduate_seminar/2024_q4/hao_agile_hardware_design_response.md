Graduate Seminar Paper <br>
Dr. Cong "Callie" Hao <br>
Agile Hardware Development: Architectures and Tools <br>
October 11, 2024 <br>
Enrique Antunano <br>

As a PMP student, I work full-time as a firmware engineer at Blue Origin implementing hardware architecture designs on FPGAs. The Agile Hardware Development: Architectures and Tools presentation by Dr. Cong "Callie" Hao hit on multiple challenges that my team and I face frequently in the industry. Dr. Hao's topics on domain-specific architecture design and tool flow improvement were interesting because I want to learn more about research that can directly improve my workflow. She touched on aspects, such as rapid functional simulations of prototype designs through LightningSim, and the RealProbe tool for runtime investigation of FPGA logic. Finally, although I do not work on vision processing or GNN applications at Blue Origin, her presentation provided insight into novel FPGA applications that I would be interested in working on.

The content of her talk focused on the infrastructure for agile hardware development. From Dr. Cao's perspective, hardware development can be divided into two problem areas. The first challenge is domain-specific architecture design, which I interpret as an RTL design that minimizes run-time data processing latency. She presented two examples of domain-specific architectures that can increase hardware performance, FlowGNN and Edge-MoE. With FlowGNN for instance, Dr. Cao described how her architecture can process equivalent GNN models faster and with greater energy efficiency than a GPU or CPU. The FlowGNN architecture, targeted on an FPGA, performed better than a GPU or CPU because inputs can be processed in parallel rather than sequentially. Additionally, the architecture pre-staged data, the first data processing step can be run in tandem with the second processing step. Both architecture improvements increase data throughput and reduce processing time compared to generalized hardware processors (GPUs and CPUs). 

The second aspect of hardware infrastructure Dr. Cao focused on was tool improvement. Specifically, she was frustrated with how slow RTL simulations prevent rapid hardware development, and complex electronics are impossible to debug and are treated as black boxes. Lightning Sim, the first tool in her presentation, speeds up simulation time for large designs from hours/days to a couple of minutes. More importantly, the tool can run simulations with a high degree of accuracy in less time than it takes for RTL to be built from HLS code. RealProbe, the second tool, can report FPGA runtime data, such as logic flow and device resource utilization.

The quick overview of Dr. Cao's research was interesting and does address industry challenges, but from my industry perspective, she did have "misses". Some concerns of mine can probably be answered by reading her lab's research. Otherwise, my other concerns stem from confusion about whether the research is solving real problems. First, I did not understand how Lightning Sim could accurately model hardware by skipping the binding step during simulation. Although I see the benefits of faster simulations, since it allows for agile hardware development, the main drawback is that the hardware is abstracted away. From my experience, there are many fabric architecture differences between FPGAs in different product lines, which drive changes in RTL that need to be simulated before and after place-and-route. As an example, within my team, I've worked with FPGAs from both Lattice Semiconductors and Microchip Technology, which both require different reset architectures. The variation in reset structures is minor, but if the RTL is not designed for the underlying hardware, then there can be issues with timing closure, wasteful resource usage, and mismatches between real behavior and simulated behavior. This is not hypothetical, my team has faced these challenges. Her research would be great for rapid hardware development but is risky when targeting a production release. The risk with rapid hardware development is that fundamental design bugs may not be caught till late in the design cycle, which can force whole architecture re-designs which may lead to schedule delays and increased spending.

Second, Dr. Hao stated that simulation time for large designs can take hours to days. This is true, and many engineers in the industry fall into this trap, but there are already industry workarounds to this issue. First, emulators can be used for faster design verification but at a large initial overhead expense in budget and labor. Second, designers can break up tests into smaller, discrete simulations. Most designers will run long regression-level simulations across their whole design, when in reality test cases can be smaller and run in parallel if using a multi-core CPU. Simulation macros can be used within the design-under-test to limit the test scope and granularity of simulations. For example, for 90% of simulations a whole read-write of memory does not have to be simulated, instead, a simulation can be run across a limited subset of memory for functional test checkout. Finally, if full-level simulation is required, it typically can be run overnight through a regression flow in git or closer to an official release of a product. So although Lightning Sim is very cool and is likely a good tool to add to the toolbox, I think Dr. Cao's research is working on issues that already have suitable workaround in industry. 

Overall, I enjoyed Dr. Hao's presentation and think her research merits further reading from myself. The architectural solutions her lab has solved sound challenging and fulfilling to solve. Particularly, the recent demand for FPGAs to develop hardware for faster, energy-efficient machine learning applications is a field I'm interested in, so it was a good chance to listen to the types of opportunities and work available. Finally, it is a breath of fresh air to see additional research in tool development for RTL verification and checkout, so I'm excited to see her continued research on faster versions of Lightning Sim, and other helpful tools like Real Probe. Although I have doubts and arguments against the merits of Lightning Sim, I think there is space for it when doing rapid prototyping and early development. It lowers the barrier by allowing for rapid simulations without a large overhead infrastructure, and it can provide metrics on the performance of prototype firmware architectures before spending additional time and labor on a product. 
